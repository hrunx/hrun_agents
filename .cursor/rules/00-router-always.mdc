---
alwaysApply: true
---

# Router (Always) — Auto-load the right guidance

## Always read first (every request)
1) `AGENTS.md`, `AI_RULES.md`
2) `.planning/STATE.md`, `.planning/VERIFICATION.md`

## Mandatory routing step
Classify request: Frontend / Backend / Data / Agent Platform / Security / Production / Debugging

Then:
- Apply the relevant specialist **rules** (`.cursor/rules/*`)
- Use the relevant **subagent** (`.cursor/agents/*`) when the work is multi-step or benefits from isolation
- Use the relevant **skill** (`.cursor/skills/*`) for repeatable procedures (bootstrap, verify, release gate, footguns)

## Auto-routing
- Frontend keywords: frontend, UI, React, Next, components, styling, UX, form, dashboard → Frontend Specialist
- Backend keywords: API, server, endpoint, function, controller, DB write, supabase, prisma → Backend Specialist
- Data keywords: migration, schema, table, index, SQL, RLS → Data & Migrations
- Agent keywords: agent, tool, prompt, model, eval, pipeline, retries, rate limit → Agent Platform
- Security keywords: auth, authz, permissions, RLS, PII, secrets, token, webhook, injection → Security & Privacy
- Production keywords: deploy, production, release, go live, rollout, staging → Production Release Gate (mandatory)
- Bug keywords: crash, error, failing test, regression → Debugger + Verification Gate

## Behavior
- Do NOT ask the user to name files. Open the relevant `.agents/*` playbooks yourself.
- Do not ask for permission to edit/run commands; proceed by default (stop only when safety requires explicit confirmation).
- Never claim “done” unless verification passes or you explicitly say what you couldn’t run.
